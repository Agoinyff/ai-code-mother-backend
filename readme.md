
## 目前已经能够实现调用AI生成代码，但是直接返回字符串的方式不便于后续解析代码并保存为文件。因此需要一种更结构化的方式来返回代码片段
     
我们可以利用LangChain4j的结构化输出特性解决这一点
### 1. 构建生成结果类
### 2.修改AI服务接口，让方法返回结构化对象


之后我们需要把AI生成的代码保存到本地中，这就需要一个文件写入的工具类
  -- 这里使用门面模式设计模式，简化文件写入的操作

## 上一步完成之后，就可以实现一个完整的AI代码生成并保存到本地的功能，但是发现了一个问题，就是结构化输出的速度比较慢，用户需要等待较长的时间才能看到结果，这种体验显然不够好
### 1.为了提升用户体验，引入SSE流式输出，但是目前的流式输出方案并不支持结构化输出，所以选择在流式返回的过程中拼接AI的返回结果，等全部输出完成后，再对拼接结果进行解析和保存，这样既保证了实时性，又不影响最终的处理流程

### 2.选择使用LangChain4j + Reactor实现流式结构化输出

## 完成了流式构造StringBuilder的功能,正则解析得到模板并存在本地，这时候会发现写了好多的重复代码，可以通过几种设计模式来优化代码结构
解析器部分：使用策略模式，不同类型的解析策略独立维护
文件保存部分:使用模板方法模式，统一保存流程
SSE流式处理：抽象出通用的流式处理逻辑

### 使用执行器模式和策略模式和模板方法模式混用
这是一个非常经典的**“三剑客”组合**。在复杂的企业级开发（尤其是 Java 后端）中，这种组合能极大地解决代码臃肿、逻辑耦合和难以扩展的问题。